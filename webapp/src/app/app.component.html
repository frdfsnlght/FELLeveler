<mat-toolbar color="primary">
    <button mat-icon-button aria-label="Main Menu" [matMenuTriggerFor]="mainMenu"><mat-icon>menu</mat-icon></button>
    <span>{{title}}</span>
    <span class="spacer"></span>
    <mat-icon
        [style.display]="model.configDirty.value ? 'block' : 'none'"
        matTooltip="The configuration has not been saved">
        warning
    </mat-icon>
</mat-toolbar>
<mat-menu #mainMenu="matMenu">
    <button mat-menu-item (click)="settings()">
        <mat-icon>settings</mat-icon>
        <span>Settings</span>
    </button>
    <button mat-menu-item (click)="calibrate()" *ngIf="model.mode.value">
        <mat-icon>perm_data_setting</mat-icon>
        <span>Calibrate</span>
    </button>
    <button mat-menu-item (click)="saveConfig()">
        <mat-icon>save</mat-icon>
        <span>Save</span>
    </button>
    <button mat-menu-item (click)="reboot()">
        <mat-icon>restart_alt</mat-icon>
        <span>Reboot</span>
    </button>
</mat-menu>

<mat-card>
    <mat-card-title><mat-icon>wifi</mat-icon> WiFi</mat-card-title>
    <mat-card-content>
        <p>
            <strong>Mode:</strong> {{model.wifiMode.value}}<br/>
            <strong>RSSI:</strong> {{model.wifiRSSI.value}} dbm
        </p>
    </mat-card-content>
</mat-card>

<mat-card>
    <mat-card-title *ngIf="model.mode.value == 'Tractor'"><mat-icon>build</mat-icon> Implement</mat-card-title>
    <mat-card-title *ngIf="model.mode.value == 'Implement'"><mat-icon>agriculture</mat-icon> Tractor</mat-card-title>
    <mat-card-content>
        <p>
            <strong>Connected:</strong> {{model.netsockConnected.value ? 'Yes' : 'No'}}<br/>
            <span *ngIf="model.netsockConnected.value"><strong>Connected to: </strong> {{model.netsockRemoteDevice.value.name ? (model.netsockRemoteDevice.value.name + ' (' + model.netsockRemoteDevice.value.address + ')') : 'Unknown'}}</span>
        </p>
    </mat-card-content>
</mat-card>

<mat-card>
    <mat-card-title><mat-icon>perm_data_setting</mat-icon> Measurements</mat-card-title>
    <mat-card-content>
        <p>
            <strong>Calibrated:</strong> {{model.calibrated.value ? 'Yes' : 'No'}}<br/>
            <span *ngIf="model.calibrated.value"><strong>Roll angle:</strong> {{(model.roll.value / 10)|number}} &deg;<br/></span>
            <span *ngIf="model.calibrated.value"><strong>Pitch angle:</strong> {{(model.pitch.value / 10)|number}} &deg;<br/></span>
            <span *ngIf="model.calibrated.value && model.mode.value=='Tractor'"><strong>Implement roll:</strong> {{(model.implementRoll.value / 10)|number}} &deg;<br/></span>
            <span *ngIf="model.calibrated.value && model.mode.value=='Tractor'"><strong>Implement pitch:</strong> {{(model.implementPitch.value / 10)|number}} &deg;</span>
        </p>
    </mat-card-content>
</mat-card>
